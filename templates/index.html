{% extends "base.html" %}
{% load staticfiles %}
{% load socialaccount %}

{% block title %}{{ block.super }}Live, Share... Make the Difference!{% endblock %}

<head>
<meta name="p:domain_verify" content="c2aa3a5b7c896fe888ee369a69bbb118"/>
</head>

{% block content %}
  <!-- Video playback row -->
   <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  
  <!-----------------------------------feature video start------------------------------------------------>
  <div class="row">       
    <div class="main_video_2_content_div">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 padd_zero" id="video">
        <div id="headline"></div>
        <section>
          {% if vid_latest_uploaded %}
            {% if vid_latest_uploaded.skigit_id.youtube_url %}
                <video id='homeframe' style="height: 360px;" class='homeframe video-js vjs-default-skin vjs-big-play-centered' controls preload='auto'
                   height="360" poster="{{ vid_latest_uploaded.skigit_id.thumbnails.all.0.get_absolute_url }}"
                   data-setup='{"autoplay": false,
                     "techOrder": ["youtube"], "sources": [{ "type": "video/youtube", "src": "{{ vid_latest_uploaded.skigit_id.get_absolute_url }}"}],
                     "youtube": {"rel": 0, "showinfo": 0, "enablejsapi": 1, "iv_load_policy": 3 }}'>
                  <p class='vjs-no-js'>
                    To view this video please enable JavaScript, and consider upgrading to a web browser that
                    <a href='https://videojs.com/html5-video-support/' target='_blank'>supports HTML5 video</a>
                  </p>
                </video>
            {% else %}
                <video id='homeframe' style="height: 360px;" class='homeframe video-js vjs-default-skin vjs-big-play-centered' controls preload='auto'
                       height="360" poster="{{ vid_latest_uploaded.skigit_id.thumbnails.all.0.get_absolute_url }}"
                       data-setup='{"controls": true, "autoplay": false, "preload": "auto"}'>
                  <source src='{{ vid_latest_uploaded.skigit_id.get_absolute_url }}' type="video/mp4" />
                  <p class='vjs-no-js'>
                    To view this video please enable JavaScript, and consider upgrading to a web browser that
                    <a href='https://videojs.com/html5-video-support/' target='_blank'>supports HTML5 video</a>
                  </p>
                </video>
            {% endif %}

          {% else %}
            <iframe height="360" width="100%" id="homeframe" class="homeframe" title="YouTube video player"
                    src="https://www.youtube.com/embed/TnUYcTuZJpM?modestbranding=1&showinfo=0&autoplay=0&autohide=1&rel=0&wmode=transparent&enablejsapi=1"
                    wmode="transparent" frameborder="0" webkitallowfullscreen mozallowfullscreen
                    allowfullscreen></iframe>
          {% endif %}
        </section>
      </div>
    </div>
  </div>
  <!-----------------------------------feature video end------------------------------------------------>
  
  
  <div class="row mar_zero" id="main">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 welcome_text_div">
      {% if not request.user.is_authenticated %}
        <div class="welcome_title" >We're so glad you found us!</div>
        <!--<span class="welcome_logo" style="margin-top: 10px;"><img src="{% static 'images/lohowelcome.png' %}"/></span>-->
        <div class="clear"></div>
        <div class="welcome_content col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <!--<p>
              <span style="font-size: 20px; ">
              Skigit is a video sharing network that enables you to create
                <span style="font-size: 20px;">
                <strong>45 Second Skigits</strong>
                <span style="font-size: 20px; ">(pronounced skiâ€™jits), about your favorite things. Share your fabulous personality and experiences with the world using
                  <span style="font-size: 20px; ">
                    <strong>originality, creativity, style, humor</strong>
                    <span style="font-size: 20px;">and</span>
                    <strong>innovation</strong>. 
                  </span>
                </span>
              </span>
              </span>
        </p>-->
        <p>&nbsp;</p>
        <p><span style="font-size: 28px;">Welcome to Skigit! Turn your 30 second video skits into widgets and make the world a better place. Receive or donate 
        <span style="font-size: 24px; font-weight:700;font-family: segoe print;color: #ce4d11;">Skitbits</span>
		<span style="font-weight:200">to your</span>
        <span style="text-align: center;">
          <span style="font-size: 26px;">
              <span style="color: #ee00ff;"> <strong><span style="font-size: 26px;">
                <strong>
                  <span>
                    <span style="font-size: 26px; color: #c86ccf;font-family: segoe print;">Favorite Cause</span>
                  </span>
                </strong>
              </span>
              </strong>
              </span>
              <span style="font-size: 28px;">just for showing-off what matters to you. </span>
			   <br>
			  
			   <!--<div style="text-align:center;font-size: 32px;margin-top: 15px;"> We're so glad you could join us!</div> -->
			  <!--<span
                  style="font-size: 20px;"><strong>heartfelt </strong></span><span
                  style="font-size: 20px;"> glimpse of your personal experiences with others and provide viewers original, emotional and creative insight into the fabric of your awesome life. After all, it is <span
                  style="color: #000;"><strong> Awesome!</strong></span>-->

			<br>
		<p style="color: #037bb8;font-size: 28px; font-weight: bold; margin-left: 29%;font-family: segoe print;">Live</p>
			<p style="color: #037bb8;font-size: 32px;margin-left: 33%!important;font-weight: bold; font-family: segoe print;">
        Share</p>
		<span class="imgLeft" ><center style="margin-top: -140px;"><img src="{% static 'images/aboutus_sun.gif' %}" width="175" alt="" ></center></span>
		</span></span></span></span></span>
        </span>
			<p style="color: #037bb8;font-size: 38px;text-align: center;font-weight: bold;font-family: segoe print;margin-left: 10%;margin-bottom:70px;">
        Make the Difference!</p>

        <div class="img_userbanner">
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 welcome_text_div">
            <p ALIGN=center class="welcome_img">
              <!--<center><img src="{% static 'images/welcome_graphics_fs.gif' %}" class="img-responsive" style="max-width:55%"></center>-->
            </p>
          </div>
        </div><!--img_userbanner-->
      </div>
    {% endif %}
    {% if request.user.is_authenticated %}
      <p class="welcome_img">
        <!--<center><img src="{% static 'images/welcome_graphics_fs.gif' %}" class="img-responsive" style="max-width:55%"></center>-->
        <span></span>
        <br>
 
     
      <div class="img_userbanner">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 welcome_text_div">
      <p ALIGN=center class="welcome_img">
        <!--<center><img src="{% static 'images/welcome_graphics_fs.gif' %}" class="img-responsive" style="max-width:55%"></center>-->
      </p>
    {% endif %}
    
    </div>
	
	<h2 id="trending">Trending Skigits</h2>
	
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" >
      <!--<h3 class="latest_skigit">Latest Skigits</h3>-->
      <div class="libnk_skigitshair" data-container="body" id="share_popover"></div>

{% if videos_latest %}
       <div id="skigit_content_list" >
          <div class="row endless_page_template">
            {% include page_template %}
          </div>
        </div>
       {% else %}
      <div class="row" id="skigit_content_list">
        <h4>There is no skigit uploaded yet</h4>
      </div>
{% endif %}

    </div>

    </div>
  </div>
  </div>
{% if not request.user.is_authenticated %}
<div class="landing-modal-wraper">
{% include "beta_landing_page.html" %}
</div>
{% endif %}
{% endblock %}
{% block js %}
  <script>jQuery.endlessPaginate({paginateOnScroll: true});</script>
  <script>
    $j = jQuery.noConflict();
    $j(document).ready(function(){
      
      {% if not request.user.is_authenticated %}
        if(localStorage.getItem('skigit_landing_modal') === null)
          $j("#landing_modal").modal('show');
        else
          $j('.landing-modal-wraper').remove();
        {% endif %}
        $j('.landing-checkbox').click(function() {
            if($j(this).is(':checked')) 
              localStorage.setItem("skigit_landing_modal", 'shown');
            else
              localStorage.removeItem("skigit_landing_modal");
            $j("#landing_modal").modal('hide');
        });
    });
    function getUrlVars() {
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i=0; i < hashes.length; i++) {
      hash = hashes[i].split('=');
      vars.push(hash[0]);
      vars[hash[0]] = hash[1];
    }
    return vars;
    }
    var id=getUrlVars()['id'];

    $j(document).ready(function() {

      if(window.location.pathname == "/login"){
        document.querySelectorAll("[data='user']")[0].click();
      }
      window.mobileAndTabletcheck = function() {
        var check = false;
        (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
        return check;
      };
      if (id) {
        if (window.mobileAndTabletcheck() && $j(".skigit_playback[data-skigit='#" + id + "mobile']").attr('data-toggle') == 'mobile') {
          document.querySelectorAll("[data-skigit='#" + id + "mobile']")[0].click();
        } else if (!window.mobileAndTabletcheck() && $j(".skigit_playback[data-skigit='#" + id + "']").attr('data-toggle') == 'modal') {
          $j(".skigit_playback[data-skigit='#" + id + "'][data-toggle='modal']").click();
        } else {
          $j("#errorBox").addClass('open');
          $j(".overlayErrorBox").addClass('open');
        }
      }

      $j('.overlayErrorBox').click(function(){
        $j("#errorBox").removeClass('open');
        $j(".overlayErrorBox").removeClass('open');
      });

      close_error_box = function() {
        $j("#errorBox").removeClass('open');
        $j(".overlayErrorBox").removeClass('open');
      }


      if($j('#homeframe_html5_api').length) {
        document.querySelector('#homeframe_html5_api').addEventListener('play',  evt => {
          countViews();
        });
      }

    });

    var isFirstTimePlay = true;
      function onYouTubeIframeAPIReady() {
            let player = YT.get('homeframe_youtube_api');
            if(player !== undefined) {
              player.addEventListener('onStateChange',  evt => {
                  if([-1, 5].indexOf(evt.data) < 0)
                  countViews();
              });
           }
      }

      function countViews() {
        if (isFirstTimePlay) {
          isFirstTimePlay = false;
          $j.ajax({
            url: "/invoice/skigit-view/",
            type: "POST",
            data: {
              view_page:1,
              skigit_id:"{{ vid_latest_uploaded.skigit_id_id }}",
              csrfmiddlewaretoken: '{{ csrf_token }}'
            },
            success: function (data) {
            }
          });
        }
      }
    </script>
{% endblock %}
